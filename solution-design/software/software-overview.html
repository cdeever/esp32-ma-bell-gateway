

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Software System Overview &mdash; ESP32 Ma Bell Gateway 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=edc13519" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="State Machine" href="state-machine.html" />
    <link rel="prev" title="Software Design" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP32 Ma Bell Gateway
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../standards.html">Telephone Service Standards</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../solution-design.html">Solution Design</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../esp32-microcontroller.html">ESP32 Microcontroller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../circuit/index.html">Circuit Design</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Software Design</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Software System Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#key-functions">Key Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="state-machine.html">State Machine</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../enclosure/index.html">Enclosure Design</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../implementation.html">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">User Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP32 Ma Bell Gateway</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../solution-design.html">Solution Design</a></li>
          <li class="breadcrumb-item"><a href="index.html">Software Design</a></li>
      <li class="breadcrumb-item active">Software System Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/solution-design/software/software-overview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="software-system-overview">
<h1>Software System Overview<a class="headerlink" href="#software-system-overview" title="Link to this heading"></a></h1>
<p>The Ma Bell Gateway software transforms a modern ESP32 microcontroller into a bridge between vintage analog telephony and contemporary mobile communication. It recreates the core behavioral elements of a classic landline—ringing, dialing, call progress tones, and voice transmission—while interfacing seamlessly with smartphones over Bluetooth.</p>
<p>This section introduces the core functions of the firmware, outlining the primary responsibilities and behaviors of each subsystem without diving into implementation details. Later sections will explore how these components are built and how they interact.</p>
<section id="key-functions">
<h2>Key Functions<a class="headerlink" href="#key-functions" title="Link to this heading"></a></h2>
<p>The firmware is organized around several coordinated subsystems, each handling a distinct aspect of the gateway’s operation:</p>
<ul>
<li><p><strong>Bluetooth Call Handling</strong></p>
<p>Manages the connection between the ESP32 and a paired mobile phone, enabling the gateway to place and receive calls. Incoming calls ring the physical ringer. Outgoing calls are initiated from the rotary dial and relayed to the phone. Audio is streamed in both directions over Bluetooth.</p>
</li>
<li><p><strong>Dialing Input Recognition</strong></p>
<p>The software supports both tone-based (DTMF) and pulse-based rotary dialing. As digits are dialed, the system captures them and assembles them into a complete phone number, triggering a call once all digits are received.</p>
</li>
<li><p><strong>Call Progress Simulation</strong></p>
<p>The gateway emulates classic telephone audio feedback—including dial tone, ringback, busy signals, and reorder tones. These audio cues are played to the user locally through the handset speaker to mirror traditional telephone behavior.</p>
</li>
<li><p><strong>Voice Audio Routing</strong></p>
<p>During a live call, voice is streamed bidirectionally between the analog handset and the paired phone. The system manages transitions between local audio (tones, feedback) and Bluetooth audio (live conversation).</p>
</li>
<li><p><strong>Status Monitoring and Diagnostics</strong></p>
<p>The device exposes its internal state through an embedded web interface, showing pairing status, call progress, and debug information. This allows for quick troubleshooting and insight into system behavior.</p>
</li>
<li><p><strong>User Interface Feedback</strong></p>
<p>A small display on the gateway provides real-time updates to the user—showing Bluetooth status, dialed digits, and call events. It acts as a minimal front panel interface for environments where the web interface isn’t accessible.</p>
</li>
</ul>
<p>Future sections will explore how each of these responsibilities is realized in code, including the state machine logic, Bluetooth stack integration, audio driver setup, and real-time GPIO input handling.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Software Design" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="state-machine.html" class="btn btn-neutral float-right" title="State Machine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Chris Deever.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>