

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="article:modified_time" content="2025-12-27T01:34:03+00:00" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Power Implementation (48V Central Supply) &mdash; ESP32 Ma Bell Gateway 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=edc13519" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ESP32 Pin Assignments" href="pin-assignments.html" />
    <link rel="prev" title="System Block Diagram" href="system-overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP32 Ma Bell Gateway
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../standards.html">Telephone Service Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../historical-perspective.html">The Bell System Blueprint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../solution-design/index.html">Solution Design</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Implementation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bom.html">Bill of Materials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Circuit Implementation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="system-overview.html">System Block Diagram</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Power Implementation (48V Central Supply)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power-architecture">Power Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-by-step-power-flow">Step-by-Step Power Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power-rail-table">Power Rail Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power-budget-analysis">Power Budget Analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#component-notes">Component Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#design-considerations">Design Considerations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pin-assignments.html">ESP32 Pin Assignments</a></li>
<li class="toctree-l3"><a class="reference internal" href="line-interface-hc5504b.html">Line Interface: HC-5504B SLIC</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring-generator.html">Ring Generator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../firmware/index.html">Firmware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pcb/index.html">PCB Design &amp; Assembly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../enclosure/index.html">Enclosure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">User Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP32 Ma Bell Gateway</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Implementation</a></li>
          <li class="breadcrumb-item"><a href="index.html">Circuit Implementation</a></li>
      <li class="breadcrumb-item active">Power Implementation (48V Central Supply)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/implementation/circuit/power-supply.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="power-implementation-48v-central-supply">
<h1>Power Implementation (48V Central Supply)<a class="headerlink" href="#power-implementation-48v-central-supply" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The Ma Bell Gateway system is powered by a single 48V/60W DC supply, with all required operating voltages generated by a combination of DC-DC converters and a ring generator circuit.</p>
<p>Key voltage rails and their uses:</p>
<ul class="simple">
<li><p><strong>-48V</strong> for the subscriber loop (on-hook voltage)</p></li>
<li><p><strong>12V</strong> for SLIC (HC3-5504B-5) chip primary power</p></li>
<li><p><strong>5V or 3.3V</strong> for the ESP32 microcontroller and logic</p></li>
<li><p><strong>90V AC, 20Hz</strong> for authentic telephone ringer operation</p></li>
</ul>
</section>
<section id="power-architecture">
<h2>Power Architecture<a class="headerlink" href="#power-architecture" title="Link to this heading"></a></h2>
<p>#.. figure:: /_static/power-architecture.png
#   :alt: Power supply block diagram
#   :align: center</p>
<blockquote>
<div><p><em>(Placeholder: insert PNG/SVG block diagram here)</em></p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="o">+----------------+</span>
   <span class="o">|</span> <span class="mi">48</span><span class="n">V</span> <span class="n">DC</span> <span class="n">Supply</span>  <span class="o">|</span>
   <span class="o">+-------+--------+</span>
           <span class="o">|</span>
   <span class="o">+-------+--------+-------------------+-------------------+</span>
   <span class="o">|</span>       <span class="o">|</span>        <span class="o">|</span>                   <span class="o">|</span>                   <span class="o">|</span>
   <span class="n">v</span>       <span class="n">v</span>        <span class="n">v</span>                   <span class="n">v</span>                   <span class="n">v</span>
<span class="p">[</span><span class="mi">12</span><span class="n">V</span> <span class="n">Buck</span><span class="p">][</span><span class="mi">5</span><span class="n">V</span> <span class="n">Buck</span><span class="p">][</span><span class="n">Inverting</span> <span class="n">DC</span><span class="o">-</span><span class="n">DC</span><span class="p">][</span><span class="n">Ring</span> <span class="n">Generator</span><span class="p">]</span>    <span class="p">(</span><span class="n">Future</span> <span class="n">Option</span><span class="p">)</span>
   <span class="o">|</span>        <span class="o">|</span>            <span class="o">|</span>                  <span class="o">|</span>
   <span class="n">v</span>        <span class="n">v</span>            <span class="n">v</span>                  <span class="n">v</span>
<span class="n">SLIC</span> <span class="n">VCC</span>  <span class="n">ESP32</span><span class="o">/</span><span class="n">Logic</span>  <span class="n">SLIC</span> <span class="n">Tip</span><span class="o">/</span><span class="n">Ring</span>      <span class="n">Ringer</span>
</pre></div>
</div>
</section>
<section id="step-by-step-power-flow">
<h2>Step-by-Step Power Flow<a class="headerlink" href="#step-by-step-power-flow" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>48V Supply as Master Power</strong></p>
<ul class="simple">
<li><p>The central 48V/60W power brick is the main power source.</p></li>
<li><p>All subsequent rails are derived from this supply.</p></li>
</ul>
</li>
<li><p><strong>-48V for On-Hook Loop</strong></p>
<ul class="simple">
<li><p>An <em>inverting DC-DC converter</em> generates a stable -48V rail referenced to ground.</p></li>
<li><p>Supplies the SLIC’s tip/ring pair for line voltage during on-hook state.</p></li>
</ul>
</li>
<li><p><strong>12V for SLIC Primary Power</strong></p>
<ul class="simple">
<li><p>A <em>DC-DC buck converter</em> steps 48V down to 12V.</p></li>
<li><p>Powers the VCC/VDD pins on the HC3-5504B-5 for analog functions.</p></li>
</ul>
</li>
<li><p><strong>3.3V for ESP32, Audio Codecs &amp; Logic</strong></p>
<ul class="simple">
<li><p>Another <em>buck converter</em> steps down 48V to 3.3V regulated output.</p></li>
<li><p>Feeds the ESP32 dev board (~500mA), PCM5100 DAC (~10mA), PCM1808 ADC (~15mA), and digital logic.</p></li>
<li><p>Minimum current capacity: 600mA (typical load ~525mA + 15% margin).</p></li>
</ul>
</li>
<li><p><strong>90V AC, 20Hz for Ringer</strong></p>
<ul class="simple">
<li><p>The 48V supply feeds a <em>ring generator module</em> that creates a 90V AC, 20Hz waveform.</p></li>
<li><p>Used for authentic operation of electromechanical ringers.</p></li>
</ul>
</li>
</ol>
</section>
<section id="power-rail-table">
<h2>Power Rail Table<a class="headerlink" href="#power-rail-table" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Rail</p></th>
<th class="head"><p>Voltage</p></th>
<th class="head"><p>Typical Current</p></th>
<th class="head"><p>Power</p></th>
<th class="head"><p>Supplies</p></th>
<th class="head"><p>How Created</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vbat</p></td>
<td><p>+48V DC</p></td>
<td><p>250-350mA</p></td>
<td><p>12-17W</p></td>
<td><p>All conversions</p></td>
<td><p>Main supply (60W)</p></td>
</tr>
<tr class="row-odd"><td><p>SLIC Loop</p></td>
<td><p>-48V DC</p></td>
<td><p>50-100mA</p></td>
<td><p>2.4-4.8W</p></td>
<td><p>SLIC (Tip/Ring)</p></td>
<td><p>Inverting DC-DC from 48V</p></td>
</tr>
<tr class="row-even"><td><p>SLIC Power</p></td>
<td><p>+12V DC</p></td>
<td><p>100mA</p></td>
<td><p>1.2W</p></td>
<td><p>SLIC (VCC)</p></td>
<td><p>Buck converter from 48V</p></td>
</tr>
<tr class="row-odd"><td><p>Logic &amp; Codecs</p></td>
<td><p>+3.3V DC</p></td>
<td><p>525mA (600mA min)</p></td>
<td><p>1.7W</p></td>
<td><p>ESP32, PCM5100, PCM1808</p></td>
<td><p>Buck from 48V</p></td>
</tr>
<tr class="row-even"><td><p>Ring AC</p></td>
<td><p>90V AC, 20Hz</p></td>
<td><p>20-40mA RMS</p></td>
<td><p>2-4W</p></td>
<td><p>Ringer circuit</p></td>
<td><p>Ring gen. from 48V</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Illuminated Dial Power: Separate 9V AC Supply</strong></p>
<p>The 9V AC required for the phone’s illuminated dial is not derived from the main power system. Instead, a separate 9V AC wall transformer is used, with its output fed directly to the black and yellow wires of the phone. This mirrors the original Bell System approach, where illumination was powered independently from the telephone line circuitry.</p>
</div>
</section>
<section id="power-budget-analysis">
<h2>Power Budget Analysis<a class="headerlink" href="#power-budget-analysis" title="Link to this heading"></a></h2>
<p>The total system power requirement can be calculated from the individual rail loads shown in the Power Rail Table above.</p>
<section id="continuous-load-idle-state">
<h3>Continuous Load (Idle State)<a class="headerlink" href="#continuous-load-idle-state" title="Link to this heading"></a></h3>
<p>When the phone is on-hook and no ringing is occurring:</p>
<ul class="simple">
<li><p><strong>3.3V rail (ESP32 + codecs):</strong> 1.7W</p></li>
<li><p><strong>12V rail (SLIC VCC):</strong> 1.2W</p></li>
<li><p><strong>-48V rail (SLIC loop, idle):</strong> 2.4W</p></li>
<li><p><strong>Ring generator:</strong> 0W (inactive)</p></li>
</ul>
<p><strong>Total idle power:</strong> ~5.3W from 48V supply = <strong>110mA &#64; 48V</strong></p>
</section>
<section id="peak-load-active-call-ringing">
<h3>Peak Load (Active Call + Ringing)<a class="headerlink" href="#peak-load-active-call-ringing" title="Link to this heading"></a></h3>
<p>When the phone is off-hook (active call) and ring generator is simultaneously active (worst case):</p>
<ul class="simple">
<li><p><strong>3.3V rail (ESP32 + codecs):</strong> 1.7W</p></li>
<li><p><strong>12V rail (SLIC VCC):</strong> 1.2W</p></li>
<li><p><strong>-48V rail (SLIC loop, off-hook):</strong> 4.8W</p></li>
<li><p><strong>Ring generator (90V AC &#64; 20Hz):</strong> 4.0W (peak)</p></li>
</ul>
<p><strong>Total peak power:</strong> ~11.7W from 48V supply = <strong>244mA &#64; 48V</strong></p>
</section>
<section id="including-converter-efficiency">
<h3>Including Converter Efficiency<a class="headerlink" href="#including-converter-efficiency" title="Link to this heading"></a></h3>
<p>Buck and inverting DC-DC converters are not 100% efficient. Typical efficiency: 80-90%.</p>
<p>Assuming 85% average efficiency:</p>
<ul class="simple">
<li><p><strong>Idle:</strong> 5.3W / 0.85 = <strong>6.2W from 48V supply</strong></p></li>
<li><p><strong>Peak:</strong> 11.7W / 0.85 = <strong>13.8W from 48V supply</strong></p></li>
</ul>
</section>
<section id="why-60w-rating">
<h3>Why 60W Rating?<a class="headerlink" href="#why-60w-rating" title="Link to this heading"></a></h3>
<p>The 48V/60W supply provides a <strong>4.3x safety margin</strong> over the calculated 13.8W peak load. This generous headroom offers several benefits:</p>
<ol class="arabic simple">
<li><p><strong>Future Expansion:</strong> Supports additional features (multiple lines, amplified ringers, status displays)</p></li>
<li><p><strong>Thermal Management:</strong> Operating at 23% of rated capacity keeps the supply cool and extends lifetime</p></li>
<li><p><strong>Inrush Current:</strong> Handles startup transients when all converters initialize simultaneously</p></li>
<li><p><strong>Component Selection:</strong> 60W supplies are readily available and cost-effective</p></li>
<li><p><strong>Reliability:</strong> Operating well below rated capacity improves long-term reliability</p></li>
</ol>
<p><strong>Alternative:</strong> A 48V/25W supply (providing 1.8x margin) would be adequate for single-line operation if cost or size is critical.</p>
</section>
</section>
<section id="component-notes">
<h2>Component Notes<a class="headerlink" href="#component-notes" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>Buck converters (3.3V &amp; 12V):</strong> Compact DC-DC modules are recommended:</p>
<ul>
<li><p><strong>For 3.3V rail:</strong> LM2596-based module or equivalent, configured for 3.3V output, minimum 1A current rating</p></li>
<li><p><strong>For 12V rail:</strong> LM2596, MP1584, or similar, configured for 12V output, minimum 200mA current rating</p></li>
<li><p>Available as ready-to-use boards from common suppliers</p></li>
</ul>
</li>
<li><p><strong>Inverting DC-DC (-48V):</strong> Use telecom-grade inverting modules or custom flyback circuits to generate -48V from +48V:</p>
<ul>
<li><p>Input: 48V DC</p></li>
<li><p>Output: -48V DC regulated, minimum 150mA current rating</p></li>
<li><p>Example modules: Mean Well IRM-02-48S, custom flyback converter</p></li>
</ul>
</li>
<li><p><strong>Ring generator (90V AC &#64; 20Hz):</strong> Produces the ringing voltage for electromechanical telephone bells. Options include:</p>
<ul>
<li><p><strong>Commercial telecom ring generator modules:</strong> Input 48V DC, output 90V AC &#64; 20Hz, 50-100mA output current</p></li>
<li><p><strong>DIY boost converter + H-bridge:</strong> Microcontroller-controlled (ESP32 GPIO) to generate 20Hz sine/square wave, boosted to 90V via transformer</p></li>
<li><p><strong>Classic 555 timer + transformer:</strong> 555 configured as 20Hz oscillator driving push-pull transistor stage with step-up transformer</p></li>
<li><p><strong>Power requirement:</strong> 48V input &#64; 100-150mA peak (4-7W) when ringing is active</p></li>
<li><p><strong>Control:</strong> Typically activated by relay (Q1 in BOM) or MOSFET driven by ESP32 GPIO</p></li>
</ul>
</li>
</ul>
</section>
<section id="design-considerations">
<h2>Design Considerations<a class="headerlink" href="#design-considerations" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The SLIC’s -48V is used <em>only</em> for line signaling on tip/ring, <strong>not for chip logic</strong>.</p></li>
<li><p>All low-voltage logic (ESP32, digital control) shares a common ground with the SLIC and power supply, ensuring safe logic-level interfacing.</p></li>
<li><p>The SLIC chip safely handles the interface between high-voltage line loop signals and your low-voltage control logic. Its output pins for status (such as off-hook detect or ring sense) are referenced to the same ground as your ESP32, so <strong>no additional optocoupler isolation is required</strong> between the SLIC and your microcontroller.</p></li>
<li><p>The ring generator and DC-DC converters must be sized to meet the maximum expected load (60W should be ample for most single-line systems).</p></li>
<li><p>For prototyping, use standard DC-DC modules; for production, design custom PCB layouts for compact integration.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Why Avoid the Telco’s “Flip-the-Ground” -48V For Line Loop</strong></p>
<p>Classic telephone systems often created -48V for the line loop by tying the positive terminal of the 48V supply to system ground,
making the negative terminal act as “-48V.” While simple and authentic, this approach “floats” the project ground 48V above earth ground.</p>
<p>For this Ma Bell Gateway implementation, we use an inverting DC-DC converter to generate a true -48V relative to ground.
This ensures all project circuits—including the SLIC, ESP32, and logic—reference true earth ground, keeping development and testing safe.</p>
<p>If you use the classic telco trick and connect any test gear (oscilloscope, logic analyzer, USB device) referenced to earth ground,
you risk creating a dangerous short circuit and damaging equipment. The inverting DC-DC approach keeps all bench measurements
and expansion safe and reliable.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="system-overview.html" class="btn btn-neutral float-left" title="System Block Diagram" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pin-assignments.html" class="btn btn-neutral float-right" title="ESP32 Pin Assignments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Chris Deever.
      <span class="lastupdated">Last updated on Dec 27, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>