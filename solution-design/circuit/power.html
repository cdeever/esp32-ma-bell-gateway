

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="article:modified_time" content="2025-06-28T21:57:32+00:00" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Power Supply Design &mdash; ESP32 Ma Bell Gateway 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=edc13519" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Voice and Tone Audio" href="audio.html" />
    <link rel="prev" title="Circuit Design" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP32 Ma Bell Gateway
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../standards.html">Telephone Service Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../historical-perspective.html">The Bell System Blueprint</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Solution Design</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../esp32-microcontroller.html">ESP32 Microcontroller</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Circuit Design</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Power Supply Design</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#historical-framing">Historical Framing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power-domains">Power Domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="#v-dc-subscriber-loop-voltage">-48V DC – Subscriber Loop Voltage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ringer-power-90v-ac">Ringer Power (~90V AC)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#v-ac-dial-illumination">9V AC – Dial Illumination</a></li>
<li class="toctree-l4"><a class="reference internal" href="#v-5v-dc-control-and-audio">3.3V / 5V DC – Control and Audio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fuse-surge-protection">Fuse &amp; Surge Protection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power-routing-and-isolation">Power Routing and Isolation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="audio.html">Voice and Tone Audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="ringer.html">Ringer Signaling</a></li>
<li class="toctree-l3"><a class="reference internal" href="off-hook-detection.html">Off-Hook Detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="dtmf-dialing-detection.html">DTMF Signaling (Detection and Generation)</a></li>
<li class="toctree-l3"><a class="reference internal" href="pulse-dialing-detection.html">Pulse Dialing Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../software/index.html">Firmware Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../enclosure/index.html">Enclosure Design</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../implementation/index.html">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">User Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP32 Ma Bell Gateway</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Solution Design</a></li>
          <li class="breadcrumb-item"><a href="index.html">Circuit Design</a></li>
      <li class="breadcrumb-item active">Power Supply Design</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/solution-design/circuit/power.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="power-supply-design">
<h1>Power Supply Design<a class="headerlink" href="#power-supply-design" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Legacy analog telephone systems operated across multiple voltage domains, each serving a distinct role—subscriber loop voltage, AC ringing, lamp power, and logic control. In recreating this behavior, the Ma Bell Gateway must provide safe and isolated supplies that replicate historical behavior while remaining compatible with modern digital components.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Safety First:</strong> Voltages above 48V can be hazardous. High-voltage domains must be clearly labeled, well-isolated, and treated with care. Never connect unisolated high-voltage rails directly to logic circuits or USB-connected equipment.</p>
</div>
</section>
<section id="historical-framing">
<h2>Historical Framing<a class="headerlink" href="#historical-framing" title="Link to this heading"></a></h2>
<p>The Bell System established standard voltages for line and subscriber equipment by the early 20th century:</p>
<ul class="simple">
<li><p><strong>Subscriber Loop (-48V DC):</strong> Established for consistent talk battery voltage and to minimize corrosion (see below)</p></li>
<li><p><strong>Ringing Signal (~90V AC &#64; 20Hz):</strong> Used to activate electromechanical bells</p></li>
<li><p><strong>Lamp Circuits (6–12V AC or DC):</strong> Powered dial illumination and panel indicators</p></li>
<li><p><strong>Logic Circuits (varied):</strong> Central office and PBX logic voltages often used -24V or +5V DC depending on the technology</p></li>
</ul>
<p>As systems evolved, switchmode regulators, SLICs, and integrated isolation became common in embedded and VoIP equipment. However, traditional analog phones still require these distinct voltages to function authentically.</p>
</section>
<section id="power-domains">
<h2>Power Domains<a class="headerlink" href="#power-domains" title="Link to this heading"></a></h2>
<p>This project replicates the classic telecom supply scheme using three distinct voltage sources:</p>
<ol class="arabic simple">
<li><p><strong>-48V DC</strong> – Simulated Central Office (CO) Subscriber Loop</p></li>
<li><p><strong>90V AC (or pulsed DC)</strong> – Mechanical Ringer Power</p></li>
<li><p><strong>9V AC</strong> – Rotary Dial Illumination</p></li>
<li><p><strong>3.3V / 5V DC</strong> – Control Logic and Audio</p></li>
</ol>
<p>Each serves a unique function and must be properly isolated.</p>
</section>
<section id="v-dc-subscriber-loop-voltage">
<h2>-48V DC – Subscriber Loop Voltage<a class="headerlink" href="#v-dc-subscriber-loop-voltage" title="Link to this heading"></a></h2>
<p>Simulates the idle line voltage applied between <strong>tip and ring</strong>, with <strong>tip at ground and ring at -48V DC</strong>. This voltage powers the loop when a phone goes off-hook and serves as the baseline for tone injection and call supervision.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Why is it negative?</strong>
The Bell System standardized on <strong>-48V DC</strong> to reduce corrosion.
With <strong>tip grounded</strong> and <strong>ring at -48V</strong>, stray currents flow <strong>into</strong> exposed metal, inhibiting oxidation.
This helped preserve outdoor connectors and relay contacts across millions of subscriber lines.</p>
</div>
<p><strong>Design Options:</strong></p>
<ul class="simple">
<li><p>A <strong>regulated bench power supply</strong> can be used to provide -48V DC directly, with the positive terminal connected to ground (tip) and the negative terminal to ring. This is stable and authentic but bulky for embedded systems.</p></li>
<li><p>A <strong>DC-DC boost converter</strong> may be used to generate -48V from a lower voltage source. This allows compact integration and automation but requires careful filtering and isolation.</p></li>
<li><p>In some embedded designs, a <strong>SLIC (Subscriber Line Interface Circuit)</strong> can internally generate the loop voltage. These are ideal for VoIP integration but may not source enough current for electromechanical ringers.</p></li>
</ul>
</section>
<section id="ringer-power-90v-ac">
<h2>Ringer Power (~90V AC)<a class="headerlink" href="#ringer-power-90v-ac" title="Link to this heading"></a></h2>
<p>Classic electromechanical ringers require a 20Hz, 90V RMS sine wave. In modern designs, this can be approximated using transformer-based oscillators or boosted Class-D drivers.</p>
<p><strong>Design Options:</strong></p>
<ul class="simple">
<li><p>A <strong>transformer-based oscillator</strong> is the most authentic method, using a 20Hz waveform (from a 555 or digital timer) to drive a push-pull transistor circuit that steps up to 90V AC. This closely replicates historical CO equipment.</p></li>
<li><p>A <strong>PWM-based Class-D audio driver</strong> combined with a step-up transformer can also produce the needed waveform. This approach is more digital but requires tuning and careful filtering.</p></li>
<li><p>A <strong>pulsed 48V DC signal</strong> is a simple alternative. While not a sine wave, many ringers will respond to 2s ON / 4s OFF pulses at 48V. This compromises authenticity but is safer and easier to implement.</p></li>
</ul>
</section>
<section id="v-ac-dial-illumination">
<h2>9V AC – Dial Illumination<a class="headerlink" href="#v-ac-dial-illumination" title="Link to this heading"></a></h2>
<p>Many rotary phones include a lamp behind the dial, powered by a low-voltage AC signal (often between 6–12V). This is typically delivered over the <strong>black/yellow</strong> pair on RJ11 jacks.</p>
<p><strong>Design Options:</strong></p>
<ul class="simple">
<li><p>A <strong>9V wall adapter</strong> (AC type) provides simple, isolated power for the dial lamp. This is straightforward and requires no internal transformer.</p></li>
<li><p>A <strong>low-voltage winding on a custom transformer</strong> can provide built-in illumination supply within the main PSU enclosure. This is compact and authentic but requires thermal planning.</p></li>
<li><p>If dynamic control is needed, an <strong>electrically isolated relay or triac</strong> can be used to switch the AC lamp circuit in sync with off-hook detection.</p></li>
</ul>
</section>
<section id="v-5v-dc-control-and-audio">
<h2>3.3V / 5V DC – Control and Audio<a class="headerlink" href="#v-5v-dc-control-and-audio" title="Link to this heading"></a></h2>
<p>Used to power digital controllers, audio DACs, sensors, relays, and other low-voltage peripherals.</p>
<p><strong>Design Options:</strong></p>
<ul class="simple">
<li><p>A <strong>USB power supply</strong> combined with an LDO regulator is often the simplest way to deliver 3.3V. However, current is limited and this may not be suitable for peripherals with high demand.</p></li>
<li><p>A <strong>switchmode buck converter</strong> can step down 12V or 24V to 3.3V or 5V with excellent efficiency. This is ideal for larger systems with audio amplifiers, displays, or relays.</p></li>
<li><p><strong>Pre-built PSU modules</strong> with dedicated outputs (e.g., 3.3V 1A) are compact and offer clean power, but may increase BOM cost.</p></li>
</ul>
</section>
<section id="fuse-surge-protection">
<h2>Fuse &amp; Surge Protection<a class="headerlink" href="#fuse-surge-protection" title="Link to this heading"></a></h2>
<p>To protect logic and user interfaces, each power domain should include:</p>
<ul class="simple">
<li><p><strong>Fast-blow or PTC fuses</strong> on high-voltage inputs</p></li>
<li><p><strong>TVS diodes</strong> or clamping zeners for surge suppression</p></li>
<li><p><strong>Flyback diodes</strong> across relay coils</p></li>
<li><p><strong>Snubber networks</strong> for AC ringing signals</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Design for <strong>fault tolerance</strong>. Ensure no fault in one domain can backfeed into others. Power rails should be fused or decoupled.</p>
</div>
</section>
<section id="power-routing-and-isolation">
<h2>Power Routing and Isolation<a class="headerlink" href="#power-routing-and-isolation" title="Link to this heading"></a></h2>
<p>To prevent accidental cross-domain exposure:</p>
<ul class="simple">
<li><p>Use <strong>galvanic isolation</strong> between power domains via:</p>
<ul>
<li><p>Transformers</p></li>
<li><p>Opto-isolators</p></li>
<li><p>Relays</p></li>
</ul>
</li>
<li><p>Keep grounds isolated: <strong>Logic GND ≠ -48V GND</strong></p></li>
<li><p>Route each supply in its own section of PCB or enclosure</p></li>
<li><p>Label all connectors with voltage and polarity</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h2>
<p>The use of multiple, purpose-specific power supplies allows the Ma Bell Gateway to faithfully recreate the behavior of traditional phone equipment while protecting modern digital components.</p>
<ul class="simple">
<li><p><strong>-48V DC</strong>: Simulates the CO loop voltage and drives current to the phone when off-hook</p></li>
<li><p><strong>90V AC (or pulsed DC)</strong>: Activates mechanical ringers in the authentic cadence</p></li>
<li><p><strong>9V AC</strong>: Powers vintage dial lamps through the outer RJ11 pair</p></li>
<li><p><strong>3.3V / 5V DC</strong>: Powers modern control logic and audio components</p></li>
</ul>
<p>Proper isolation, protection, and layout are essential for safe and functional operation across these mixed-voltage domains.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Circuit Design" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="audio.html" class="btn btn-neutral float-right" title="Voice and Tone Audio" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Chris Deever.
      <span class="lastupdated">Last updated on Jun 28, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>