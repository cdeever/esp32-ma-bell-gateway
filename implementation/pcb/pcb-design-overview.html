

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="article:modified_time" content="2025-12-29T12:15:21+00:00" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PCB Design Overview &mdash; ESP32 Ma Bell Gateway 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=edc13519" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Enclosure" href="../enclosure/index.html" />
    <link rel="prev" title="PCB Design &amp; Assembly" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP32 Ma Bell Gateway
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../standards.html">Telephone Service Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../historical-perspective.html">The Bell System Blueprint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../solution-design/index.html">Solution Design</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Implementation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bom.html">Bill of Materials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../circuit/index.html">Circuit Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware/index.html">Firmware</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">PCB Design &amp; Assembly</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">PCB Design Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#design-philosophy">Design Philosophy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#design-tools">Design Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#workflow-overview">Workflow Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#project-repository">Project Repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#slic-circuit-layout-guidelines">SLIC Circuit Layout Guidelines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../enclosure/index.html">Enclosure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">User Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP32 Ma Bell Gateway</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Implementation</a></li>
          <li class="breadcrumb-item"><a href="index.html">PCB Design &amp; Assembly</a></li>
      <li class="breadcrumb-item active">PCB Design Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/implementation/pcb/pcb-design-overview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pcb-design-overview">
<h1>PCB Design Overview<a class="headerlink" href="#pcb-design-overview" title="Link to this heading"></a></h1>
<p>This page provides a high-level overview of the PCB design process for the Ma Bell Gateway project.</p>
<section id="design-philosophy">
<h2>Design Philosophy<a class="headerlink" href="#design-philosophy" title="Link to this heading"></a></h2>
<p>The goal is to produce a robust, easy-to-assemble printed circuit board that faithfully implements the Ma Bell Gateway circuit while maintaining signal integrity, power isolation, and modularity.
Particular attention is given to proper grounding, clear separation of analog and digital domains, and ease of hand-assembly for prototyping and hobbyist builds.</p>
</section>
<section id="design-tools">
<h2>Design Tools<a class="headerlink" href="#design-tools" title="Link to this heading"></a></h2>
<p>PCB design for this project is performed using <strong>KiCad</strong>, an open-source electronic design automation (EDA) suite.
KiCad provides schematic capture, PCB layout, 3D visualization, and output generation for fabrication and assembly.
All project files (schematics, board layouts, and libraries) are maintained in the project repository.</p>
</section>
<section id="workflow-overview">
<h2>Workflow Overview<a class="headerlink" href="#workflow-overview" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Schematic Capture:</strong>
The complete circuit is drawn in KiCad’s schematic editor, with careful attention to symbol and footprint assignment.</p></li>
<li><p><strong>PCB Layout:</strong>
Components are placed and routed in KiCad PCBNew, with attention to:
- Star grounding and ground planes
- Segregation of analog, digital, and high-voltage sections
- Proper trace widths for power and signal paths
- Placement of protection, filtering, and connectors</p></li>
<li><p><strong>Design Rule Checks (DRC):</strong>
Layout is verified using KiCad’s built-in DRC tools to catch clearance, net, and layout errors.</p></li>
<li><p><strong>3D Visualization:</strong>
The finished board is reviewed in 3D to check mechanical fit and connector alignment.</p></li>
<li><p><strong>Manufacturing Outputs:</strong>
Gerber files, drill files, BOM, and pick-and-place files are exported for PCB fabrication and assembly.</p></li>
</ol>
</section>
<section id="project-repository">
<h2>Project Repository<a class="headerlink" href="#project-repository" title="Link to this heading"></a></h2>
<p>All KiCad source files, as well as outputs for manufacturing and assembly, are tracked in the project’s Git repository:</p>
<ul class="simple">
<li><p>Schematic files (<cite>.kicad_sch</cite>)</p></li>
<li><p>PCB layout files (<cite>.kicad_pcb</cite>)</p></li>
<li><p>Symbol and footprint libraries</p></li>
<li><p>BOM, Gerbers, assembly drawings</p></li>
</ul>
<p>See the repository documentation for file organization and version control practices.</p>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h2>
<p>Refer to the subpages in this section for detailed information on the PCB workflow, layout strategies, assembly guidance, and troubleshooting tips.</p>
</section>
<section id="slic-circuit-layout-guidelines">
<h2>SLIC Circuit Layout Guidelines<a class="headerlink" href="#slic-circuit-layout-guidelines" title="Link to this heading"></a></h2>
<p>Proper PCB layout is critical for the SLIC circuit to function reliably and meet noise/EMI requirements. Follow these guidelines during board design.</p>
<section id="general-layout-strategy">
<h3>General Layout Strategy<a class="headerlink" href="#general-layout-strategy" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p><strong>Functional Zones:</strong></p>
<ul class="simple">
<li><p>Protection zone (fuses, bridge, MOV) near phone jack</p></li>
<li><p>SLIC zone (IC and immediate passives) in center</p></li>
<li><p>Audio zone (codec and coupling) near SLIC</p></li>
<li><p>Power supply zone (buck converters, decoupling) separate from audio</p></li>
</ul>
</li>
<li><p><strong>Signal Flow:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Phone Jack ──► Protection ──► SLIC ──► Audio Codec ──► ESP32
                               │
                            Power Supply
</pre></div>
</div>
<p>Arrange components to follow this left-to-right signal flow on PCB.</p>
</li>
</ol>
</section>
<section id="grounding">
<h3>Grounding<a class="headerlink" href="#grounding" title="Link to this heading"></a></h3>
<p><strong>Star Ground Topology:</strong></p>
<p>The three SLIC ground pins (AG, DG, BG) must connect at a single star ground point as close to the SLIC as possible.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>┌─────────────────────────────────┐
│        SLIC IC (Top View)        │
│                                  │
│   Pin 23 (AG) ──┐               │
│   Pin 6  (DG) ──┼───► ★ Star    │
│   Pin 12 (BG) ──┘      GND Pad  │
│                        (Copper)  │
└─────────────────────────────────┘
         │
         └──► System Ground Plane
</pre></div>
</div>
<ul class="simple">
<li><p>Use wide traces (&gt;50 mil) or copper pour for star ground connection</p></li>
<li><p>Avoid running return currents from other circuits through SLIC ground</p></li>
<li><p>Connect star ground to main PCB ground plane at single point</p></li>
</ul>
</section>
<section id="power-supply-decoupling">
<h3>Power Supply Decoupling<a class="headerlink" href="#power-supply-decoupling" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Ceramic capacitors (100nF):</strong> Place within 0.5” (12mm) of VB+ pin</p></li>
<li><p><strong>Bulk capacitors (10µF):</strong> Place within 1” (25mm) of VB+ and VB- pins</p></li>
<li><p><strong>Via placement:</strong> Use multiple vias (2-4) for power/ground connections to reduce inductance</p></li>
</ul>
</section>
<section id="high-voltage-clearances">
<h3>High Voltage Clearances<a class="headerlink" href="#high-voltage-clearances" title="Link to this heading"></a></h3>
<p>For traces carrying -48V, +12V, or ring voltage (90V AC):</p>
<ul class="simple">
<li><p><strong>Trace spacing:</strong> Minimum 2mm (80 mil) between high voltage and low voltage traces</p></li>
<li><p><strong>Creepage:</strong> Maintain 2.5mm creepage distance for 150V rating</p></li>
<li><p><strong>Clearance:</strong> Air gap ≥2mm for 150V</p></li>
<li><p><strong>Solder mask:</strong> Use solder mask as additional barrier but don’t rely on it alone for isolation</p></li>
</ul>
</section>
<section id="audio-path-layout">
<h3>Audio Path Layout<a class="headerlink" href="#audio-path-layout" title="Link to this heading"></a></h3>
<p>Audio traces (SLIC TX/RX to codec) should be:</p>
<ul class="simple">
<li><p><strong>Short and direct:</strong> Minimize trace length (&lt;3 inches ideal)</p></li>
<li><p><strong>Differential routing:</strong> Route TX+ and TX- as differential pair (if applicable)</p></li>
<li><p><strong>Guard traces:</strong> Surround audio traces with ground guard traces</p></li>
<li><p><strong>Ground plane:</strong> Provide solid ground plane under audio signals</p></li>
<li><p><strong>Separation:</strong> Keep audio traces away from digital signals (I2S clock, data) and switching power supplies</p></li>
</ul>
</section>
<section id="digital-signal-integrity">
<h3>Digital Signal Integrity<a class="headerlink" href="#digital-signal-integrity" title="Link to this heading"></a></h3>
<p>For ESP32 GPIO and I2S signals:</p>
<ul class="simple">
<li><p><strong>Trace impedance:</strong> Target 50Ω for high-speed signals (I2S BCLK, LRCLK)</p></li>
<li><p><strong>Length matching:</strong> Match I2S data and clock trace lengths within 0.5”</p></li>
<li><p><strong>Termination:</strong> Series 22-33Ω resistors on I2S signals near ESP32 if trace length &gt;3”</p></li>
<li><p><strong>Crosstalk:</strong> Separate parallel traces by 3x trace width minimum</p></li>
</ul>
</section>
<section id="protection-circuit-placement">
<h3>Protection Circuit Placement<a class="headerlink" href="#protection-circuit-placement" title="Link to this heading"></a></h3>
<p>Place protection components (fuses, bridge, MOV) as close to the phone jack as possible:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Phone Jack ──[ &lt;0.5&quot; ]──► Fuses ──[ &lt;1&quot; ]──► Bridge/MOV ──► SLIC
</pre></div>
</div>
<ul class="simple">
<li><p>Minimizes unprotected trace length</p></li>
<li><p>Reduces chances of surge coupling to other circuits</p></li>
<li><p>Use wide traces (&gt;20 mil / 0.5mm) for TIP/RING to handle fault currents</p></li>
</ul>
</section>
<section id="layer-stackup">
<h3>Layer Stackup<a class="headerlink" href="#layer-stackup" title="Link to this heading"></a></h3>
<p><strong>Recommended 4-layer stackup:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Layer</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Signal</span> <span class="o">+</span> <span class="n">Components</span> <span class="p">(</span><span class="n">top</span><span class="p">)</span>
<span class="n">Layer</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Ground</span> <span class="n">Plane</span>
<span class="n">Layer</span> <span class="mi">3</span><span class="p">:</span> <span class="n">Power</span> <span class="n">Plane</span> <span class="p">(</span><span class="o">+</span><span class="mi">12</span><span class="n">V</span><span class="p">,</span> <span class="o">+</span><span class="mf">3.3</span><span class="n">V</span><span class="p">,</span> <span class="o">-</span><span class="mi">48</span><span class="n">V</span> <span class="n">zones</span><span class="p">)</span>
<span class="n">Layer</span> <span class="mi">4</span><span class="p">:</span> <span class="n">Signal</span> <span class="o">+</span> <span class="n">Components</span> <span class="p">(</span><span class="n">bottom</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>For 2-layer boards:</strong></p>
<ul class="simple">
<li><p>Top: Signals and components</p></li>
<li><p>Bottom: Ground pour with power routing</p></li>
</ul>
</section>
<section id="thermal-considerations">
<h3>Thermal Considerations<a class="headerlink" href="#thermal-considerations" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>SLIC IC can dissipate 1-2W during ringing</p></li>
<li><p>Provide thermal relief with copper pour connected to ground pins</p></li>
<li><p>If using DIP package, consider adding heat sink or thermal pad</p></li>
</ul>
</section>
<section id="component-placement-summary">
<h3>Component Placement Summary<a class="headerlink" href="#component-placement-summary" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>┌──────────────────────────────────────────────────┐
│  Phone Jack (J1)                                  │
│       │                                           │
│   [Protection Zone]                               │
│    F1, F2, BR1, MOV                               │
│       │                                           │
│    ┌──────────────────┐                          │
│    │   SLIC IC (U1)   │   [Audio Zone]          │
│    │   HC-5504B-5     │    Codec, coupling       │
│    │                  ├──────────┐               │
│    │  Passives around │          │               │
│    │  (C2, C3, C4,    │      Codec IC            │
│    │   R_TIP, R_RING) │          │               │
│    └──────────────────┘          │               │
│       │                           │               │
│    [Power Zone]              I2S signals          │
│    Buck converters           to ESP32 ───────────►│
│    Decoupling caps                                │
│                                                   │
└───────────────────────────────────────────────────┘
</pre></div>
</div>
</section>
<section id="testing-validation">
<h3>Testing &amp; Validation<a class="headerlink" href="#testing-validation" title="Link to this heading"></a></h3>
<p>After PCB assembly:</p>
<ol class="arabic simple">
<li><p>Visual inspection for solder bridges, polarity</p></li>
<li><p>Continuity check: Star ground, power rails</p></li>
<li><p>Power-on test: Measure +12V, -48V at SLIC pins</p></li>
<li><p>Off-hook test: Connect phone, lift handset, verify SHD signal</p></li>
<li><p>Audio loopback: Test TX/RX paths with signal generator/scope</p></li>
<li><p>Protection test: Apply controlled overvoltage to verify MOV clamping</p></li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="PCB Design &amp; Assembly" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../enclosure/index.html" class="btn btn-neutral float-right" title="Enclosure" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Chris Deever.
      <span class="lastupdated">Last updated on Dec 29, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>